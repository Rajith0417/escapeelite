(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[977],{803:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var i=s(5155),a=s(2115),o=s(5239),r=s(5774);function n(e){var t,s;let{questionnaireId:n="f9abbd99-4a16-4ff1-953b-b80bed2f8b28",className:l=""}=e,[d,u]=(0,a.useState)([{id:"1",text:"Hello and welcome to Escape Elite!",sender:"bot",timestamp:new Date},{id:"2",text:"Ready to get started?",sender:"bot",timestamp:new Date}]),[c,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)(""),[x,f]=(0,a.useState)(!1),[y,b]=(0,a.useState)(null),[g,w]=(0,a.useState)(0),[v,j]=(0,a.useState)({}),[N,q]=(0,a.useState)(!1),D=(0,a.useRef)(null);(0,a.useRef)(null);let S=(0,a.useCallback)(async()=>{try{let e=await r.h.getQuestionnaire(n);e?(b(e),console.log("Loaded questionnaire: ".concat(e.title," (ID: ").concat(n,")"))):console.error("Questionnaire not found for ID: ".concat(n))}catch(e){console.error("Failed to load questionnaire:",e)}},[n]);(0,a.useEffect)(()=>{S()},[n,S]),(0,a.useEffect)(()=>{var e;null==(e=D.current)||e.scrollIntoView({behavior:"smooth"})},[d]);let k=e=>{let t={id:Date.now().toString(),text:e,sender:"user",timestamp:new Date};u(e=>[...e,t]),e.includes("build my dream holiday")?(q(!0),w(0),setTimeout(()=>{if(y&&y.questions.length>0){let e=y.questions[0],t={id:(Date.now()+1).toString(),text:"Great! Let's start with the first question: ".concat(e.text),sender:"bot",timestamp:new Date};u(e=>[...e,t])}},1e3)):setTimeout(()=>{let e={id:(Date.now()+1).toString(),text:"I understand you'd prefer to speak with a specialist. Let me connect you with one of our holiday experts who can provide personalized assistance.",sender:"bot",timestamp:new Date};u(t=>[...t,e])},1e3)};return(0,i.jsx)("div",{className:"  ".concat(l),children:(0,i.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-200 w-full md:w-auto h-[680px] flex flex-col overflow-hidden",children:[(0,i.jsx)("div",{className:"bg-[#38424B] px-4 py-3 flex items-center justify-between",children:(0,i.jsx)("div",{className:"",children:(0,i.jsx)(o.default,{src:"logo.png",alt:"Escape Elite",width:50,height:0,className:"h-8 w-auto object-cover"})})}),(0,i.jsxs)("div",{className:"flex-1 p-4 overflow-y-auto bg-white",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[d.map(e=>(0,i.jsxs)("div",{className:"flex ".concat("bot"===e.sender?"justify-start":"justify-end"),children:["bot"===e.sender&&(0,i.jsxs)("div",{className:"flex items-start gap-2",children:[(0,i.jsx)(o.default,{src:"images/user.png",alt:"chatbot",width:10,height:10,className:"w-10 h-10 rounded-full"}),(0,i.jsx)("div",{className:"bg-blue-100 text-gray-800 px-4 py-2 rounded-2xl max-w-xs",children:e.text})]}),"user"===e.sender&&(0,i.jsx)("div",{className:"border-blue-400 border text-blue-400 px-6 py-2 rounded-full max-w-xs",children:e.text})]},e.id)),x&&(0,i.jsx)("div",{className:"flex justify-start",children:(0,i.jsxs)("div",{className:"flex items-start gap-2",children:[(0,i.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:(0,i.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),(0,i.jsx)("div",{className:"bg-blue-100 text-gray-800 px-4 py-2 rounded-2xl",children:(0,i.jsxs)("div",{className:"flex space-x-1",children:[(0,i.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,i.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,i.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})]}),2===d.length&&!N&&(0,i.jsx)("div",{className:"mt-6 ml-12 space-y-3 flex flex-col items-start",children:[{id:"1",text:"Yes, let's build my dream holiday!",action:()=>k("Yes, let's build my dream holiday!")},{id:"2",text:"I'd prefer to speak to a holiday specialist.",action:()=>k("I'd prefer to speak to a holiday specialist.")},{id:"3",text:"I'd prefer to chat with a holiday specialist.",action:()=>k("I'd prefer to chat with a holiday specialist.")}].map(e=>(0,i.jsx)("button",{onClick:e.action,className:"text-left bg-white border border-blue-400 text-blue-400 px-4 py-3 rounded-full hover:bg-blue-50 transition-colors text-sm",children:e.text},e.id))}),N&&y&&(0,i.jsx)("div",{className:"mt-6 ml-12 space-y-3 flex flex-col items-start",children:null==(s=y.questions[g])||null==(t=s.options)?void 0:t.map((e,t)=>(0,i.jsx)("button",{onClick:()=>{p(e),(()=>{if(""===m.trim())return;let e=m.trim(),t={id:Date.now().toString(),text:e,sender:"user",timestamp:new Date};if(u(e=>[...e,t]),p(""),f(!0),N&&y){let t=y.questions[g];j(s=>({...s,[t.id]:e})),setTimeout(async()=>{let s=g+1;if(s<y.questions.length){w(s);let e=y.questions[s],t={id:(Date.now()+1).toString(),text:"Thank you! Next question: ".concat(e.text),sender:"bot",timestamp:new Date};u(e=>[...e,t])}else{q(!1);let s={id:(Date.now()+1).toString(),text:"Perfect! I have all the information I need. Based on your preferences, I'll create a personalized holiday quote for you. Our specialist will contact you within 24 hours with your custom itinerary and pricing.",sender:"bot",timestamp:new Date};u(e=>[...e,s]);let i={questionnaireId:n,answers:{...v,[t.id]:e},timestamp:new Date};try{let e=await r.h.submitQuestionnaire(i);console.log("Questionnaire submitted successfully:",e)}catch(e){console.error("Failed to submit questionnaire:",e)}}f(!1)},1500)}else setTimeout(()=>{let e=["That's interesting! Tell me more about your travel preferences.","I understand. Let me help you find the perfect destination.","Great choice! What's your budget range for this trip?","I'd be happy to help you plan that. When are you thinking of traveling?","That sounds wonderful! How many people will be traveling with you?","Perfect! Let me suggest some amazing destinations for you.","I see! What type of accommodation do you prefer?","Excellent! What activities are you most interested in during your trip?"],t=e[Math.floor(Math.random()*e.length)],s={id:(Date.now()+1).toString(),text:t,sender:"bot",timestamp:new Date};u(e=>[...e,s]),f(!1)},1500)})()},className:"text-left bg-white border border-blue-400 text-blue-400 px-4 py-3 rounded-full hover:bg-blue-50 transition-colors text-sm",children:e},t))}),(0,i.jsx)("div",{ref:D})]})]})})}},3723:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,1356,23)),Promise.resolve().then(s.bind(s,803))},5774:(e,t,s)=>{"use strict";s.d(t,{h:()=>a});let i={"f9abbd99-4a16-4ff1-953b-b80bed2f8b28":{id:"f9abbd99-4a16-4ff1-953b-b80bed2f8b28",title:"Holiday Planning Questionnaire",description:"Help us understand your travel preferences to create the perfect holiday experience",questions:[{id:"destination",text:"What destination are you most interested in visiting?",type:"single_choice",options:["Sri Lanka","Maldives","India","Seychelles","Mauritius","Other"],required:!0},{id:"travel_dates",text:"When are you planning to travel?",type:"single_choice",options:["Within 1 month","1-3 months","3-6 months","6-12 months","More than 1 year"],required:!0},{id:"group_size",text:"How many people will be traveling?",type:"single_choice",options:["Just me","2 people","3-4 people","5-6 people","More than 6 people"],required:!0},{id:"budget",text:"What's your approximate budget per person?",type:"single_choice",options:["Under \xa31,000","\xa31,000 - \xa32,000","\xa32,000 - \xa33,000","\xa33,000 - \xa35,000","Over \xa35,000"],required:!0},{id:"accommodation",text:"What type of accommodation do you prefer?",type:"multiple_choice",options:["Luxury hotels","Boutique hotels","Resorts","Villas","Eco-lodges","Budget hotels"],required:!0},{id:"activities",text:"What activities interest you most?",type:"multiple_choice",options:["Beach relaxation","Cultural tours","Adventure sports","Wildlife safaris","Food experiences","Historical sites","Wellness & spa"],required:!0},{id:"special_requirements",text:"Do you have any special requirements or preferences?",type:"text",required:!1}]}};class a{static async getQuestionnaire(e){return await new Promise(e=>setTimeout(e,100)),i[e]||null}static async submitQuestionnaire(e){return await new Promise(e=>setTimeout(e,500)),console.log("Questionnaire submitted:",e),{success:!0,message:"Thank you for completing the questionnaire! Our specialist will contact you within 24 hours with your personalized holiday quote."}}static async getAllQuestionnaires(){return await new Promise(e=>setTimeout(e,100)),Object.values(i)}static validateResponse(e,t){let s=[];return e.questions.forEach(e=>{e.required&&!t[e.id]&&s.push('Question "'.concat(e.text,'" is required'))}),{valid:0===s.length,errors:s}}}}},e=>{e.O(0,[239,441,255,358],()=>e(e.s=3723)),_N_E=e.O()}]);