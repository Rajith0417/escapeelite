"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[488],{5086:(e,s,l)=>{l.d(s,{default:()=>i});var t=l(5155),a=l(2115),r=l(5239);let i=function(e){let{chatbotId:s}=e,[l,i]=(0,a.useState)([]),[n,d]=(0,a.useState)([]),[o,c]=(0,a.useState)(null),[u,x]=(0,a.useState)(null),[m,h]=(0,a.useState)(""),[p,b]=(0,a.useState)(""),[f,v]=(0,a.useState)(""),[g,j]=(0,a.useState)(!1),[N,y]=(0,a.useState)(null),[w,S]=(0,a.useState)([{roomTypeName:"STANDARD STAY",adults:1,children:0,childAges:[]}]),C=(0,a.useRef)(null),E="/escapeelite";(0,a.useEffect)(()=>{(async()=>{try{var e,l,t,a;let r=await fetch("https://d5ulwibf6e.execute-api.ap-south-1.amazonaws.com/prod/api/v1/questionnaires/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({questionnaireId:s,message:"Hello and welcome to Escape Elite!"})}),n=await r.json();if(console.log("Start API:",n),c(n.sessionId),(null==(e=n.questionnaireConfig)?void 0:e.welcomeMessage)&&i([{sender:"bot",text:n.questionnaireConfig.welcomeMessage}]),null==(l=n.nextQuestion)?void 0:l.question){let e=n.nextQuestion.question;x(e),i(s=>[...s,{sender:"bot",text:e.longText}]),d(null!=(a=null==(t=e.answers)?void 0:t.map(e=>e.answer))?a:[])}}catch(e){console.error("Start error:",e),y("Failed to start chat. Please refresh and try again.")}})()},[]),(0,a.useEffect)(()=>{D()},[l,g]);let D=()=>{C.current&&(C.current.scrollTop=C.current.scrollHeight)},T=async e=>{if(!o||!u)return;j(!0),y(null),i(s=>[...s,{sender:"user",text:e}]),d([]);let s={questionId:u.PK,shortText:u.shortText,answer:e,sessionId:o};try{var l,t,a,r;let e=await fetch("https://d5ulwibf6e.execute-api.ap-south-1.amazonaws.com/prod/api/v1/user-responses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),n=await e.json();if(console.log("Response API:",n),null==(l=n.nextQuestion)?void 0:l.question){let e=n.nextQuestion.question;x(e),i(s=>[...s,{sender:"bot",text:e.longText}]),d(null!=(r=null==(a=e.answers)?void 0:a.map(e=>e.answer))?r:[]),b(""),v(""),h("")}else(null==(t=n.questionnaireConfig)?void 0:t.endingMessage)&&(i(e=>{var s,l;return[...e,{sender:"bot",text:null!=(l=null==n||null==(s=n.questionnaireConfig)?void 0:s.endingMessage)?l:""}]}),x(null))}catch(s){console.error("Response error:",s);let e="Sorry, there was an error processing your response. Please try again.";y(e),i(s=>[...s,{sender:"bot",text:e}])}finally{j(!1)}},L=()=>{m.trim()&&!g&&(T(m),h(""))},k=e=>{"Enter"!==e.key||g||L()},q=()=>{p.trim()&&!g&&(T(M(p)),b(""))},I=()=>{f.trim()&&!g&&(T(f),v(""))},M=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),A=()=>{var e;let[s,l]=(0,a.useState)({}),[r,i]=(0,a.useState)({});if((0,a.useEffect)(()=>{var e;if(null==u||null==(e=u.responseDomain)?void 0:e.sliders){let e={};u.responseDomain.sliders.forEach(s=>{e[s.id]=s.defaultValue||0}),l(e)}},[u]),!(null==u||null==(e=u.responseDomain)?void 0:e.sliders))return(0,t.jsx)("div",{children:"No sliders configured"});let n=u.responseDomain.sliders;return(0,t.jsxs)("div",{className:"p-4 space-y-6 overflow-scroll",children:[n.map((e,a)=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("label",{className:"text-blue-400 text-base font-normal",children:e.shortText}),(0,t.jsx)("span",{className:"text-blue-400 font-normal",children:s[e.id]||0})]}),(0,t.jsx)("input",{type:"range",min:e.minValue,max:e.maxValue,step:e.step||1,value:s[e.id]||0,onChange:s=>{var t,a;return t=e.id,a=parseInt(s.target.value),void(l(e=>({...e,[t]:a})),i(e=>{let s={...e};return delete s[t],s}))},className:"w-full h-2 bg-blue-100 rounded-lg appearance-none cursor-pointer"}),(0,t.jsxs)("div",{className:"flex items-center justify-between space-x-2",children:[(0,t.jsx)("span",{className:"text-blue-400 text-base font-normal w-12",children:e.minLabel}),(0,t.jsx)("span",{className:"text-blue-400 text-base font-normal w-12 text-right",children:e.maxLabel})]}),r[e.id]&&(0,t.jsx)("p",{className:"text-xs text-red-500",children:r[e.id]})]},e.id)),(0,t.jsx)("button",{onClick:()=>{(()=>{let e={},l=!0;return n.forEach(t=>{let a=s[t.id]||0;t.required&&0===a&&(e[t.id]="This field is required",l=!1),t.crossValidations&&t.crossValidations.length>0&&t.crossValidations.forEach(t=>{if(t.expression.includes("Relaxation")&&t.expression.includes("Extreme Adventure")){let a=n.find(e=>"Relaxation"===e.shortText),r=n.find(e=>"Extreme Adventure"===e.shortText);if(a&&r){let i=s[a.id]||0,n=s[r.id]||0;i>=6&&n>=1&&(e[r.id]=t.errorMessage,l=!1)}}})}),i(e),l})()&&T(JSON.stringify(n.map(e=>({[e.shortText]:s[e.id]||0}))))},disabled:g,className:"px-6 py-2.5 bg-white text-blue-400 rounded-full border border-blue-400 hover:bg-blue-50 disabled:opacity-50",children:g?"...":"Submit"})]})},O=()=>{var e;let[s,l]=(0,a.useState)({}),[r,i]=(0,a.useState)({});if((0,a.useEffect)(()=>{var e;if(null==u||null==(e=u.responseDomain)?void 0:e.textFields){let e={};u.responseDomain.textFields.forEach(s=>{e[s.id]=""}),l(e)}},[u]),!(null==u||null==(e=u.responseDomain)?void 0:e.textFields))return(0,t.jsx)("div",{children:"No form fields configured"});let n=u.responseDomain.textFields;return(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[n.map(e=>(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("input",{type:e.type||"text",value:s[e.id]||"",onChange:s=>{var t,a;return t=e.id,a=s.target.value,void(l(e=>({...e,[t]:a})),i(e=>{let s={...e};return delete s[t],s}))},placeholder:e.placeholder||"",className:"w-full px-6 py-2.5 bg-white text-blue-400 rounded-[100px] border border-blue-400 focus:outline-0","aria-invalid":!!r[e.id],"aria-describedby":r[e.id]?"".concat(e.id,"-error"):void 0}),r[e.id]&&(0,t.jsx)("p",{id:"".concat(e.id,"-error"),className:"text-xs text-red-500",children:r[e.id]})]},e.id)),(0,t.jsx)("button",{onClick:()=>{if((()=>{let e={},l=!0;return n.forEach(t=>{var a,r;let i=s[t.id]||"";t.required&&!i.trim()&&(e[t.id]="This field is required",l=!1),"email"===t.type&&i&&!/\S+@\S+\.\S+/.test(i)&&(e[t.id]="Please enter a valid email address",l=!1),"tel"===t.type&&i&&!/^[+]?[\d\s\-()]+$/.test(i)&&(e[t.id]="Please enter a valid phone number",l=!1),(null==(a=t.validation)?void 0:a.minLength)&&i.length<t.validation.minLength&&(e[t.id]="Must be at least ".concat(t.validation.minLength," characters"),l=!1),(null==(r=t.validation)?void 0:r.maxLength)&&i.length>t.validation.maxLength&&(e[t.id]="Must be at most ".concat(t.validation.maxLength," characters"),l=!1)}),i(e),l})()){let e={};n.forEach(l=>{e[l.label]=s[l.id]||""}),T(JSON.stringify(e))}},disabled:g,className:"px-6 py-2.5 bg-white text-blue-400 rounded-[100px] border border-blue-400 disabled:hidden",children:g?"...":"Submit"})]})};return(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 w-full md:w-auto h-[680px] flex flex-col overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-[#38424B] px-4 py-3 flex items-center justify-between",children:(0,t.jsx)(r.default,{src:"".concat(E,"/logo.png"),alt:"Escape Elite",width:50,height:0,className:"h-8 w-auto object-cover"})}),(0,t.jsxs)("div",{ref:C,className:"flex-1 p-4 overflow-y-auto space-y-3",children:[l.map((e,s)=>(0,t.jsx)("div",{className:"flex ".concat("bot"===e.sender?"justify-start":"justify-end"),children:"bot"===e.sender?(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(r.default,{src:"".concat(E,"/images/user.png"),alt:"chatbot",width:10,height:10,className:"w-10 h-10 rounded-full"}),(0,t.jsx)("div",{className:"bg-blue-100 text-gray-800 px-4 py-2 rounded-2xl max-w-[75%]",children:e.text})]}):(0,t.jsxs)("div",{className:"flex items-start gap-2 flex-row-reverse",children:[(0,t.jsx)(r.default,{src:"".concat(E,"/images/user.png"),alt:"chatbot",width:10,height:10,className:"w-10 h-10 rounded-full"}),(0,t.jsx)("div",{className:"border-blue-400 border text-blue-400 px-6 py-2 rounded-full max-w-[75%]",children:e.text})]})},s)),g&&(0,t.jsx)("div",{className:"flex justify-start",children:(0,t.jsx)("div",{className:"px-4 py-2 rounded-2xl bg-gray-200 text-gray-800",children:(0,t.jsxs)("div",{className:"flex space-x-1",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),(0,t.jsx)("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,t.jsx)("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),N&&!g&&(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("div",{className:"px-4 py-2 rounded-lg bg-red-100 text-red-800 text-sm",children:N})}),(()=>{var e,s,l,a,r,i,d,o,c;if(!u)return null;switch(u.questionType){case"DATE_PICKER":return(0,t.jsxs)("div",{className:"p-3",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 items-start space-x-2",children:[(0,t.jsx)("input",{type:"date",value:p,onChange:e=>b(e.target.value),min:(null==u||null==(a=u.responseDomain)||null==(l=a.validation)?void 0:l.minDate)?u.responseDomain.validation.minDate:new Date().toISOString().split("T")[0],max:(null==u||null==(i=u.responseDomain)||null==(r=i.validation)?void 0:r.maxDate)?u.responseDomain.validation.maxDate:"",disabled:g,className:"min-w-1/2 flex-1 px-6 py-2.5 bg-bg-white text-blue-400 rounded-full border border-blue-400  focus:border-blue-400 disabled:bg-gray-100","aria-label":"Select date"}),(0,t.jsx)("button",{onClick:q,disabled:!p||g,className:"px-6 py-2.5 bg-white text-blue-400 rounded-full border border-blue-400 disabled:hidden",children:g?"...":"Select"})]}),(null==u||null==(s=u.responseDomain)||null==(e=s.validation)?void 0:e.minDate)&&(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Minimum date:"," ",M(u.responseDomain.validation.minDate)]}),N&&(0,t.jsx)("p",{className:"text-xs text-red-500 mt-1",children:N})]});case"DROP_DOWN":case"SELECT":let x=n.length>0?n:(null==u||null==(d=u.responseDomain)?void 0:d.options)||[];return(0,t.jsxs)("div",{className:"p-3",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3 flex-col space-x-2",children:[(0,t.jsxs)("select",{value:f,onChange:e=>v(e.target.value),disabled:g,className:"flex-1 border text-blue-400 border-blue-400 rounded-[100px] px-6 py-2.5 focus-visible:border-[1px] focus:outline-0 focus:border-blue-400 disabled:bg-gray-100","aria-label":"Select from dropdown",children:[(0,t.jsx)("option",{value:"",children:"Select an option"}),x.map((e,s)=>(0,t.jsx)("option",{value:e,children:e},s))]}),(0,t.jsx)("button",{onClick:I,disabled:!f||g,className:"px-4 py-2 border border-blue-400 bg-white text-blue-400 rounded-[100px] hover:outline-0 disabled:hidden",children:g?"...":"Submit"})]}),(null==u||null==(c=u.responseDomain)||null==(o=c.validation)?void 0:o.required)&&(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This field is required"}),N&&(0,t.jsx)("p",{className:"text-xs text-red-500 mt-1",children:N})]});case"MCQ_SINGLE_CHOICE":case"MCQ_MULTIPLE_CHOICE":if(n.length>0)return(0,t.jsx)("div",{className:"p-3 flex flex-wrap gap-2 bg-white",children:n.map((e,s)=>(0,t.jsx)("button",{onClick:()=>T(e),disabled:g,className:"px-6 py-2.5 bg-bg-white text-blue-400 rounded-full border border-blue-400 text-sm transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed disabled:text-gray-500",children:e},s))});return(0,t.jsxs)("div",{className:"p-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{value:m,onChange:e=>{h(e.target.value),N&&y(null)},onKeyPress:k,placeholder:"Type your message...",disabled:g,className:"flex-1 border rounded-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:hidden"}),(0,t.jsx)("button",{onClick:L,disabled:!m.trim()||g,className:"px-4 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 disabled:hidden",children:g?"...":"Send"})]}),N&&(0,t.jsx)("p",{className:"text-xs text-red-500 mt-1",children:N})]});case"MULTI_SLIDER":return(0,t.jsx)(A,{});case"MULTIPLE_FREE_FORM_TEXT":return(0,t.jsx)(O,{});case"ROOM_SELECTION":let j=(e,s,l)=>{S(t=>{let a=[...t];return a[e][s]=Math.max(0,l),"children"===s&&(a[e].childAges=Array(l).fill(0)),a})},C=w.reduce((e,s)=>e+s.adults+s.children,0);return(0,t.jsxs)("div",{className:"p-3 space-y-4",children:[(0,t.jsx)("p",{children:"Number of Rooms (1-10):"}),w.map((e,s)=>(0,t.jsxs)("div",{className:"p-3 border rounded-lg bg-white space-y-3 shadow-sm",children:[(0,t.jsxs)("p",{className:"font-semibold",children:["Room ",s+1]}),(0,t.jsxs)("div",{className:"flex flex-row items-center space-x-2",children:[(0,t.jsx)("span",{className:"flex-1",children:"Adults"}),(0,t.jsxs)("div",{className:"w-[145px] flex gap-6 px-6 py-3 items-center border border-blue-400 rounded-[100px]",children:[(0,t.jsx)("button",{onClick:()=>j(s,"adults",e.adults-1),className:"flex justify-center items-center w-5 h-5 bg-white border border-blue-400 text-blue-400 rounded-[100%]",children:"-"}),(0,t.jsx)("span",{className:"text-blue-400",children:e.adults}),(0,t.jsx)("button",{onClick:()=>j(s,"adults",e.adults+1),className:"flex justify-center items-center w-5 h-5 bg-blue-400 border border-blue-400 text-white rounded-[100%]",children:"+"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"flex-1",children:"Children"}),(0,t.jsxs)("div",{className:"w-[145px] flex gap-6 px-6 py-3 items-center border border-blue-400 rounded-[100px]",children:[(0,t.jsx)("button",{onClick:()=>j(s,"children",e.children-1),className:"flex justify-center items-center w-5 h-5 bg-white border border-blue-400 text-blue-400 rounded-[100%]",children:"-"}),(0,t.jsx)("span",{children:e.children}),(0,t.jsx)("button",{onClick:()=>j(s,"children",e.children+1),className:"flex justify-center items-center w-5 h-5 bg-blue-400 border border-blue-400 text-white rounded-[100%]",children:"+"})]})]}),e.children>0&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"flex-1 text-sm font-medium",children:"Child Ages"}),e.childAges.map((e,l)=>(0,t.jsxs)("select",{value:e,onChange:e=>{var t;return t=parseInt(e.target.value),void S(e=>{let a=[...e];return a[s].childAges[l]=t,a})},className:"w-[145px] border border-blue-400 rounded-[100px] px-6 py-3 focus:outline-0",children:[(0,t.jsx)("option",{value:0,children:"-"}),Array.from({length:17},(e,s)=>(0,t.jsx)("option",{value:s+1,children:s+1},s+1))]},l))]})]},s)),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Total occupants: ",C]}),(0,t.jsx)("button",{onClick:()=>{T(JSON.stringify(w))},disabled:g,className:"px-6 py-2.5 border border-blue-400 text-blue-400 rounded-[100px] hover:border-blue-400 disabled:hidden",children:g?"...":"Submit"})]});default:return null}})()]})]})}},7189:(e,s,l)=>{l.d(s,{default:()=>r});var t=l(5155);l(2115);var a=l(5239);function r(e){let{image:s,titleDesktop:l,titleMobile:r,paragraph:i,rating:n,fullScreen:d=!0}=e;return(0,t.jsxs)("section",{id:"home",className:"relative ".concat(d?"h-screen":"h-[306px] md:h-[700px]"),children:[(0,t.jsx)(a.default,{src:"".concat("/escapeelite").concat(s),alt:"",fill:!0,className:"object-cover object-center"}),(0,t.jsx)("div",{className:"absolute z-0 inset-0 bg-black opacity-50"}),(0,t.jsxs)("div",{className:"container h-full w-full px-5 mx-auto flex flex-col md:flex-row items-center justify-center md:justify-start text-white text-center]",children:[(0,t.jsxs)("div",{className:"hidden float-left z-10 md:w-1/2 md:block pl-16",children:[(0,t.jsx)("h2",{className:"text-4xl md:text-4xl font-medium mb-4 text-left",children:l}),(0,t.jsx)("p",{children:i}),n&&(0,t.jsx)("div",{className:"flex items-center mb-5",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("svg",{className:"w-10 h-10 ".concat(void 0!==n&&s<n?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},s))})]}),(0,t.jsxs)("div",{className:"px-16 z-10 md:hidden text-center md:text-left",children:[(0,t.jsx)("h2",{className:"text-4xl md:text-4xl font-medium mb-4",children:r}),(0,t.jsx)("p",{children:i})]})]})]})}}}]);